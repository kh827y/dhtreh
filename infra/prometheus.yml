global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'loyalty-monitor'
    environment: 'production'

rule_files:
  - /etc/prometheus/alerts.yml

scrape_configs:
  - job_name: 'api'
    static_configs:
      - targets: ['api:3000']
    metrics_path: /metrics
    scrape_interval: 10s
    authorization:
      type: Bearer
      credentials: ${METRICS_TOKEN}

  - job_name: 'worker'
    static_configs:
      - targets: ['worker:3001']
    metrics_path: /metrics
    scrape_interval: 10s
    authorization:
      type: Bearer
      credentials: ${METRICS_TOKEN}

  - job_name: 'traefik'
    static_configs:
      - targets: ['traefik:8082']
    metrics_path: /metrics
