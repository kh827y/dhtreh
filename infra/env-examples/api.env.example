# API (NestJS)
NODE_ENV=production

# Database
# Use together with docker-compose.production.yml: DB_PASSWORD is referenced
DB_PASSWORD=change_me_db
DATABASE_URL=postgresql://loyalty:${DB_PASSWORD}@postgres:5432/loyalty

# Redis (optional but recommended)
REDIS_PASSWORD=change_me_redis
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# Core secrets
ADMIN_KEY=change_me_admin_key
QR_JWT_SECRET=change_me_qr_secret
ADMIN_SESSION_SECRET=change_me_session_secret

# Public origins and base URLs (adjust DOMAIN)
DOMAIN=example.com
CORS_ORIGINS=https://admin.${DOMAIN},https://cashier.${DOMAIN},https://app.${DOMAIN}
API_BASE_URL=https://api.${DOMAIN}
MINIAPP_BASE_URL=https://app.${DOMAIN}

# Observability (optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.0
OTEL_ENABLED=0
METRICS_TOKEN=

# Telegram (global fallback; per-merchant tokens are preferred via Admin UI)
TELEGRAM_BOT_TOKEN=
TELEGRAM_BOT_USERNAME=

# Idempotency TTL (hours)
IDEMPOTENCY_TTL_HOURS=72

# Workers
WORKERS_ENABLED=0
NO_HTTP=0
# OUTBOX_WORKER_CONCURRENCY=3
# OUTBOX_MAX_RETRIES=10
# OUTBOX_HTTP_TIMEOUT_MS=10000
# OUTBOX_CB_THRESHOLD=5
# OUTBOX_CB_WINDOW_MS=60000
# OUTBOX_CB_COOLDOWN_MS=120000
# OUTBOX_RPS_DEFAULT=0
# OUTBOX_RPS_BY_MERCHANT="M-1=5,M-2=3"
