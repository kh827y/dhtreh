# Domain Configuration
DOMAIN=loyalty.example.com
ADMIN_EMAIL=admin@example.com

# Database
DB_PASSWORD=strong_password_here
DATABASE_URL=postgresql://loyalty:${DB_PASSWORD}@postgres:5432/loyalty

# Redis
REDIS_PASSWORD=strong_redis_password_here
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# Security Keys
ADMIN_KEY=generate_strong_random_key_here
QR_JWT_SECRET=generate_strong_jwt_secret_here
ADMIN_SESSION_SECRET=generate_strong_session_secret_here
PORTAL_REFRESH_SECRET=generate_strong_portal_refresh_secret_here

# Admin Credentials
ADMIN_UI_PASSWORD=secure_admin_password

# URLs
API_BASE_URL=https://api.loyalty.example.com
MINIAPP_BASE_URL=https://app.loyalty.example.com
CORS_ORIGINS=https://app.loyalty.example.com,https://admin.loyalty.example.com,https://cashier.loyalty.example.com

# Frontend (Merchant Portal, Admin, Miniapp)
# Public base URL for API used by Next.js frontends
NEXT_PUBLIC_API_BASE=https://api.loyalty.example.com
# Public admin API key for Admin UI (x-api-key)
NEXT_PUBLIC_API_KEY=replace_with_admin_api_key
# Optional cookie domain for Merchant Portal cookies (use leading dot to share across subdomains)
# PORTAL_COOKIE_DOMAIN=.loyalty.example.com
# Basic Auth for Protected Services (user:password in htpasswd format)
# Generate with: htpasswd -nb username password
ADMIN_BASIC_AUTH=admin:$$2y$$10$$zFm7Zz.Hashed.Password.Here
TRAEFIK_BASIC_AUTH=traefik:$$2y$$10$$zFm7Zz.Hashed.Password.Here
METRICS_BASIC_AUTH=metrics:$$2y$$10$$zFm7Zz.Hashed.Password.Here

# Grafana
GRAFANA_PASSWORD=secure_grafana_password

# Monitoring
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# S3 Backup (optional)
S3_BUCKET=loyalty-backups
S3_ACCESS_KEY=your_s3_access_key
S3_SECRET_KEY=your_s3_secret_key
S3_ENDPOINT=https://s3.amazonaws.com

# ATOL Integration (optional)
ATOL_LOGIN=your_atol_login
ATOL_PASSWORD=your_atol_password
ATOL_GROUP_CODE=your_group_code
ATOL_INN=your_inn
ATOL_CALLBACK_URL=https://api.loyalty.example.com/integrations/atol/webhook

# Telegram MiniApp Bot (per-merchant integration)
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_ADMIN_CHAT_ID=-1001234567890

# Unified Telegram Staff Notifications Bot (global)
# Set this token from BotFather for the global staff notifications bot.
# Webhook will be set to: $API_BASE_URL/telegram/notify/webhook
TELEGRAM_NOTIFY_BOT_TOKEN=123456789:ReplaceWithRealToken
# Arbitrary secret used to verify Telegram webhook requests (X-Telegram-Bot-Api-Secret-Token)
TELEGRAM_NOTIFY_WEBHOOK_SECRET=replace_with_random_secret

# Payment Gateway (optional)
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key

# Email Service (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=Loyalty Program <noreply@loyalty.example.com>

# SMS Service (optional)
SMS_API_KEY=your_sms_api_key
SMS_SENDER=LOYALTY

# Rate Limiting
RATE_LIMIT_TTL=60000
RATE_LIMIT_MAX=100

# Worker Configuration
WORKERS_ENABLED=1
WEBHOOK_WORKERS=4
WEBHOOK_RETRY_DELAY_MS=5000
WEBHOOK_MAX_RETRIES=5
# Auto-return mechanic worker
AUTO_RETURN_WORKER_INTERVAL_MS=21600000
AUTO_RETURN_BATCH_SIZE=200
# Birthday greetings mechanic worker
BIRTHDAY_WORKER_INTERVAL_MS=21600000
BIRTHDAY_WORKER_BATCH_SIZE=200
# TTL burn reminder worker
POINTS_TTL_REMINDER=1
POINTS_TTL_REMINDER_INTERVAL_MS=21600000

# Feature Flags
EARN_LOTS_FEATURE=1
LEDGER_FEATURE=1
MULTI_BOT_FEATURE=1

# Development/Staging
NODE_ENV=production
DEBUG=false
LOG_LEVEL=info
