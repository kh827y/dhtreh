# MP Dashboard (merchant-portal/app/page.tsx) — найденные проблемы

## P2 — Medium

### 1) Прогресс онбординга считает только 4 шага при наличии 6 карточек
**Где:** `merchant-portal/app/page.tsx` (расчёт `totalSteps = 4` при наличии 6 карточек).

**Проблема:** прогресс и «Выполнено X из Y» учитывают только первые 4 карточки, но интерфейс показывает 6 шагов (есть «Системные настройки» и «Telegram Mini App»). В итоге можно увидеть 100% завершения, хотя 2 карточки остаются «не настроено», что вводит в заблуждение при запуске.

**Почему важно:** некорректный статус готовности портала → неверное понимание «готовности к запуску».

### 2) Карта «Настройки бонусов» привязана к флагу механик, а не к настройкам бонусов
**Где:** `merchant-portal/app/page.tsx` (иконка статуса для «Настройки бонусов» использует `status?.hasMechanics`).

**Проблема:** `hasMechanics` отражает включённые механики (birthday/referral/autoReturn/welcome), а не фактические настройки бонусов (TTL, отложенное начисление, правила списания). В итоге UI показывает «настроено», даже если бонусные настройки не заданы (или наоборот).

**Почему важно:** неверный сигнал о готовности правил начисления/списания может привести к ошибкам в работе программы лояльности.

## P3 — Low

### 3) «Срок жизни баллов: Не ограничен» захардкожен и не отражает реальные настройки
**Где:** `merchant-portal/app/page.tsx` (карта «Настройки бонусов»).

**Проблема:** значение всегда статичное, хотя срок жизни баллов настраивается на backend. В итоге мерчант видит неактуальные данные.

**Почему важно:** неверные сведения по сроку жизни баллов → риск ошибок при принятии решений.

### 4) Карты «Системные настройки» и «Telegram Mini App» не связаны с backend-статусом
**Где:** `merchant-portal/app/page.tsx`.

**Проблема:** статус иконок всегда «внимание» без проверки фактической конфигурации. Нет запроса к backend-статусу системных настроек/подключения Telegram Mini App, поэтому карточки не отражают реальное состояние.

**Почему важно:** пользователи не понимают, действительно ли интеграции/системные настройки подключены.
