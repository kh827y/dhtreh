# Merchant Portal — Loyalty overview (аудит)

Ниже перечислены найденные проблемы по разделу лояльности. Сортировка по убыванию критичности.

## P1 — Высокая важность (Security/PII)
Нет актуальных пунктов.

## P2 — Средняя важность (abuse/надёжность)

3) **В уровнях лояльности нет верхних ограничений на проценты начисления/списания**
   - **Где:** `api/src/loyalty-program/loyalty-program.service.ts` (`sanitizePercent` и `createTier`/`updateTier`).
   - **Что происходит:** `earnRatePercent`/`redeemRatePercent` валидируются только на неотрицательность и переводятся в bps, верхний предел отсутствует.
   - **Риск:** ошибочная настройка (например, 500% или 5000%) ведёт к мгновенному “раздутию” баллов и финансовому ущербу/абузу.
   - **Примечание:** в других местах (например, `earnBps` в `UpdateMerchantSettingsDto`) лимит 0–10000 уже задан, здесь аналогичный лимит отсутствует.
