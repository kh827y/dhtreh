# Аудит механики TTL: напоминания о сгорании баллов

## Критично

1. **Дублирующая логика списания TTL и риск двойного сгорания баллов.**
   - В проекте одновременно существуют два воркера сгорания: `PointsBurnWorker` (флаг `POINTS_TTL_BURN`) и `TtlBurnWorker` (флаг `TTL_BURN_ENABLED`).
   - Оба воркера проходят по `pointsTtlDays` и могут списывать одни и те же lot'ы.
   - Если оба флага включены, возможно двойное списание и расхождение учёта. Дополнительно `TtlBurnWorker` не использует advisory lock — при нескольких инстансах может сработать параллельно.
   - Файлы: `api/src/points-burn.worker.ts`, `api/src/ttl-burn.worker.ts`.

## Высокая важность

Нет актуальных пунктов.

## Средняя важность

Нет актуальных пунктов.
