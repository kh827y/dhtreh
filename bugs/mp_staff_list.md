# Аудит: список сотрудников (merchant-portal/app/staff/page.tsx, /portal/staff)

Ниже — найденные проблемы, отсортированные по убыванию критичности.

## Высокий приоритет

Нет актуальных пунктов.

## Средний приоритет

Нет актуальных пунктов.

## Низкий приоритет

### 1) Фолбэк групп доступа может ломать фильтр/создание сотрудников при отсутствии `/portal/access-groups`
**Где:** `merchant-portal/app/api/portal/access-groups/route.ts` (фолбэк через `/portal/staff`).

**Суть:** если `/portal/access-groups` вернул 404, фолбэк делает `GET /portal/staff` и ожидает массив, хотя API возвращает объект `{ items, counters }`. В итоге всегда возвращаются дефолтные роли (MERCHANT/MANAGER/ANALYST/CASHIER), которые не являются реальными `accessGroupIds`. При попытке фильтрации по группе или создании сотрудника с выбранной «ролью» возможны ошибки или нулевые результаты.

**Риск:** в среде со старым/нестабильным API фильтр по группам и выдача списков могут быть некорректными.

**Что проверить/исправить:** корректно обрабатывать формат `/portal/staff` (извлекать `items`) или убрать фолбэк, если `access-groups` обязательно.
