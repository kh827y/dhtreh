# Аудит: merchant-portal / loyalty cashier

Ниже проблемы отсортированы по убыванию критичности.

## High

### 1) Нет механизма для принудительного отзыва активированных устройств кассира
- **Где:** `api/src/merchants/merchants.service.ts` (создание `cashierDeviceSession`, отзыв возможен только по токену устройства), `api/src/loyalty/loyalty.controller.ts` (`DELETE /loyalty/cashier/device` требует cookie устройства), `merchant-portal/app/loyalty/cashier/page.tsx` (в UI только коды активации и PIN-ы, без списка/отзыва устройств).
- **Проблема:** отзыв кода активации работает только для **неиспользованных** кодов (`revokeCashierActivationCode` фильтрует `usedAt: null`), а уже активированное устройство остаётся валидным до ~180 дней и не может быть отозвано со стороны мерчанта.
- **Риск:** потеря/кража устройства = длительный неуправляемый доступ к кассовым операциям.

## Medium

Нет актуальных пунктов.

## Low

Нет актуальных пунктов.
