# Аудит merchant-portal: /outlets/new и /portal/outlets

## P1 — Высокая критичность

1. **Удаление торговой точки не работает (UI есть, API нет).**
   - **Симптом**: на странице списка есть кнопка удаления, но запрос уходит на `DELETE /api/portal/outlets/:id` и проксируется в `DELETE /portal/outlets/:id`.
   - **Причина**: в backend отсутствует обработчик `DELETE` для `portal/outlets`.
   - **Риск/влияние**: удалить точку из портала невозможно → мусорные/ошибочные точки остаются в системе, бизнес-процессы ломаются.
   - **Где смотреть**: `merchant-portal/app/outlets/page.tsx`, `merchant-portal/app/api/portal/outlets/[id]/route.ts`, `api/src/merchant-panel/controllers/outlets.controller.ts`.

2. **Нельзя заполнить ключевые поля торговой точки, которые поддерживаются backend.**
   - **Симптом**: UI создания/редактирования позволяет задать только название, статус работы, ссылки на отзывы и устройства.
   - **Причина**: в интерфейсе отсутствуют поля для адреса, телефона, скрытия точки от клиентов, расписания/таймзоны, интеграционных идентификаторов, координат и adminEmails.
   - **Риск/влияние**: 
     - невозможно скрывать точки от клиентов (поле `hidden`);
     - нельзя корректно заполнять данные для интеграций/поиска (externalId/integration*);
     - отсутствует базовая контактная информация (адрес/телефон), если она используется в витрине/аналитике.
   - **Где смотреть**: `merchant-portal/app/outlets/new/page.tsx`, `merchant-portal/app/outlets/[id]/page.tsx`, `api/src/merchant-panel/dto/outlet.dto.ts`.

## P2 — Средняя критичность

3. **Прокси `/api/portal/outlets` отрезает пагинацию → видны только первые 20 точек.**
   - **Симптом**: роут прокси обрабатывает только `status` и `search`, но игнорирует `page/pageSize`.
   - **Причина**: параметры пагинации не пробрасываются в запрос к backend.
   - **Риск/влияние**: при 21+ торговых точках список в UI (и в любых местах, где используется этот эндпоинт) будет неполным; часть точек нельзя выбрать/найти.
   - **Где смотреть**: `merchant-portal/app/api/portal/outlets/route.ts`, `api/src/common/dto/pagination.dto.ts`.
