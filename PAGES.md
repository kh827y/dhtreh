В админ панели в списке мерчантов добавить возможность удаления мерчанта и его редактирование, а также обязательно указание имени владельца мерчанта при создании нового мерчанта, в панели мерчанта автоматически создается сотрудник с этим именем.

Убрать устройства, вместо этого реализовать торговые точки.

Заменить текущий фронтенд на следующий (убрать все что есть сейчас, а также перенести настройки QR TTL, Требовать подпись Bridge Требовать Staff‑ключ для операций в админ панель, а не в мерчант панель): 

Сделать в панели мерчантов раздел "Сотрудники": подразделы "Работает" и "Уволен" с подсвечиванием выбранного подраздела, ниже надпись "Найдено: * записей", фильтры: поле выбора ролей - по умолчанию "Все роли", рядом поле выбора торговых точек - по умолчанию "Все торговые точки", рядом ползунок (вкл/выкл) "Только с доступом в панель", справа кнопка "Добавить сотрудника" и поле поиска "Поиск по имени или e-mail" с иконкой лупы, ниже таблица "Имя" (небольшой аватар (либо иконка анонима если аватар не установлен) и имя, а для владельца мерчанта добавляется значок-кружок с буквой "А" внутри, рядом с именем), "Торговые точки", "Активность" (рядом вопросительный знак в кружочке, при наведении на который показывается окошко с пояснением: "Дата последней транзакции или входа в панель управления"), "Доступ в панель управления" (зеленая галочка и слово "Да" либо красный крестик и слово "Нет"). При нажатии на позицию в таблице открывается страница - карточка сотрудника:
## Верхняя панель страницы сотрудника
- **Имя, email и телефон** — карточка сотрудника.
- Слева аватарка с иконкой карандаша (в кружочке в правом нижнем углу аватарки)
- **Редактировать** — модальное окно изменить имя фамилию должность телефон и комментарий сотрудника. 
- **Сменить пароль** (доступна только при просмотре авторизованным пользователем своего профиля, для всех остальных кнопка серая и некликабельная) — задать новый пароль для входа в админ-панель (модальное окно: старый пароль, новый пароль, повторить новый пароль).
- **Посмотреть транзакции** (активна только для сотрудников у которых были транзакции, иначе - кнопка серая и некликабельная) — открыть страницу журнала всех операций (из раздела "Программа лояльности"), применить фильтр по сотруднику
- **Уволить** — делает пользователя неактивным: доступы блокируются, история сохраняется. Для уволенных сотрудников кнопка меняется на **Восстановить** и возвращает статус «Работает».
## Доступы
- **Доступ в админ панель** — тумблер лишь раскрывает форму с параметрами доступа, сам по себе он ничего не сохраняет (для владельца выключить нельзя). После изменения состояния обязательно нажимать **Сохранить**, чтобы подтвердить включение или отключение.
- **Группа доступа** (некликабельное для владельца мерчанта) — роль/набор прав для админ-панели. Состав прав настраивается в разделе "Группы доступа".
- **E-mail** — логин для админ-панели и адрес для служебных уведомлений. Нажмите **Сохранить** после изменения.
- **Пароль** — поле отображается, только если для сотрудника ещё не задан пароль. После сохранения скрывается; повторная смена выполняется через кнопку «Сменить пароль» в верхнем блоке.
## Связанные торговые точки (для панели кассира)
Здесь выдаются права на работу с панелью кассира в конкретных точках.
- **Выберите торговую точку** → **Добавить точку для кассира — сотрудник получает возможность проводить операции в выбранной точке.  
    При активной кассовой интеграции точка может добавиться автоматически после первой транзакции пользователя.
Таблица ниже показывает:
- **Торговая точка** — где сотрудник имеет доступ.
- **Транзакций всего** — сколько операций он провёл.
- **Последняя транзакция** — дата/время последней операции.
- **Пин-код от панели кассира**,
    Доступные действия:
    - ⟳ **Обновить пин-код** — сгенерировать новый (используйте, если код скомпрометирован или сотрудник сменил устройство).
    - ✕ **Отозвать** — отключить код/доступ по этой точке (до выдачи нового кода операции недоступны).

Кнопка "Добавить сотрудника" - всплывающее окно с замыленным фоном и красным крестиком для закрытия: при создании нужно будет указать обязательно: имя, необязательно: фамилия, должность, телефон, комментарий. Также нужно сделать ползунок (вкл/выкл) "Доступ в админ-панель" (имеется в виду панель мерчанта) и вопросительный знак в кружочке рядом, при наведении на который появляется надпись "Позволяет входить в панель управления программы лояльности. При создании кассиров обычно стоит оставить эту опцию выключенной." Если включена опция "Доступ в админ-панель", тогда в окне создания сотрудника вылезают дополнительные поля: обязательно нужно указать email и пароль, который менеджер будет использовать для входа в мерчант панель (в том же окне авторизации что и авторизовывается мерчант, но при этом созданный сотрудник не является мерчантом), а также обязательно нужно выпадающее поле для выбора "Выбрать группу доступа" (находится над полями email и пароль для входа в панель, рядом кнопка для обновления списка групп (иконка вращающейся стрелки)) и рядом кнопка-ссылка на страницу в настройках для редактирования групп доступа (иконка плюсика). На странице редактирования групп доступа находится таблица с текущими группами: порядковый номер, название, количество участников и кнопки иконками RUD (Read, Update, Delete). Также на этой странице есть кнопка для создания новой группы доступа: открывается окно (красный крестик для закрытия, фон замыливается) с указанием названия группы и чекбоксы для CRUD каждой функции в панели, по умолчанию все отмечены, а также добавление сотрудников из выпадающего поля выбора и кнопкой "Добавить".

Для каждой торговой точки сотрудника генерируется отдельный пин-код из 4 цифр. При входе в виртуальный терминал кассира выбирается точка, после чего кассир вводит соответствующий пин-код (система идентифицирует сотрудника по связке точка+PIN). Помимо пин-кода сначала кассиру выводится окно авторизации: логин и пароль. Логин — это название мерчанта (отформатированное к нижнему регистру без пробелов и без прочих символов, не являющихся английскими буквами), а пароль — это 9 цифр. В окне авторизации поле для ввода пароля выглядит как 9 квадратов, каждые 3 разделены «-». Информация о логине и пароле для входа в панель кассира отображается в настройках мерчант панели; пароль можно перегенерировать кнопкой с вращающимися стрелками.

Сделать промокоды на баллы: главная страница раздела "Промокоды" (Убрать текущую "Ваучеры") - заголовок "Промокоды", ниже кнопки смены разделов "Активные" и "Архивные" с подсвечиванием текущего выбора. Ниже в каждом из разделов надпись "Показаны записи ..-.. из ..", ниже таблица: "Промокод", "Описание", "Начислить баллов", "Присвоить группу", "Срок действия", "Использован раз" и кнопки иконками RUD (В архиве еще кнопка вернуть промокод).
Также есть кнопка "Создать промокод", при переходе на эту страницу открывается окно (фон замыливается, есть красный крестик для закрытия окна): поле "Промокод" (который будет вводить клиент для получения бонуса), поле "Описание" (Видите только вы), "Период действия" - две кнопки с выбором даты "Дата начала", "Дата завершения" значения по умолчанию "Сразу" и "Бессрочно" соответственно (названия показываются на кнопках) и рядом с каждой из этих двух кнопок крестики, нажав на которые сбрасывается текущее значение и устанавливается значение по умолчанию. Поле "Начислять баллы за ввод промокода" и рядом ползунок для активации опции (Если выключен, то ввод промокода не дает баллы, если включен открывается поле ввода (надпись прям в поле): "Введите количество баллов").
"Включить сгорание баллов" и рядом ползунок для активации опции (Если выключен, то баллы промокода не сгорают, если включен открывается поле ввода (надпись прям в поле): "Через сколько дней баллы сгорят?").
"Изменить уровень клиента за ввод промокода" и рядом ползунок для активации опции (Если выключен, то уровень клиента не меняется при вводе промокода, если включен открывается поле выбора с установленными уровнями начислений).
"Ограничения на количество использований" и ниже поле выбора: "Без ограничений" - "Одно использование всем клиентам" - "Одно использование одному клиенту".
"Период использования в днях" и рядом ползунок для активации опции (Если выключен, то промокод нельзя использовать повторно, если включен открывается поле ввода (надпись прям в поле): "Введите количество дней"). Рядом вопросительный знак в кружочке, при наведении на который открывается пояснение: "Как часто клиент может использовать промокод. По умолчанию промокоды можно использовать единожды."
"Активен только если был визит" и рядом ползунок для активации опции (Если выключен, то промокод можно использовать если хотя бы был один визит, если включен открывается поле ввода (надпись выше поля ввода): "Количество часов в течение которых активен промокод:"). Ниже поля пояснение "Если указан **0** то промокод можно использовать если был хотя бы 1 визит" (значение по умолчанию 0, сразу стоит в поле ввода).

Сделать акции с начислением баллов: заголовок "Акции", ниже кнопки смены разделов "Предстоящие", "Активные" и "Прошедшие" с подсвечиванием текущего выбора. Ниже компактные карточки каждой акции со всей информацией по ней, а также с указанием количество участников и небольшими графиками выручки сгенерированной с помощью участников акции, которые активировали акцию и потом оплатили часть покупки с помощью акционных баллов. Кнопка "Создать акцию": открывается окно, фон замыливается, есть красный крестик для закрытия окна, "Название акции (видно только вам)", "Время проведения"  - две кнопки с выбором даты "Дата начала", "Дата завершения" значения по умолчанию "Сразу" и "Бессрочно" соответственно (названия показываются на кнопках) и рядом с каждой из этих двух кнопок крестики, нажав на которые сбрасывается текущее значение и устанавливается значение по умолчанию. "Аудитория, кому доступна акция" (рядом кнопка для обновления списка аудиторий (иконка вращающейся стрелки)): поле выбора аудитории, ниже надпись "Если вы не нашли подходящей аудитории, то можно *создать новую*" ("создать новую" - это ссылка на страницу аудиторий). "Начислить баллы" и ползунок (вкл/выкл) - если включено то ниже появляется поле с текстом внутри "Введите количество баллов" и появляется "Баллы сгорают после окончания акции" с ползунком (вкл/выкл), "Отправить PUSH-уведомление когда акция станет доступна" - если включено появляется: большое поле "Текст уведомления" (внизу справа под полем счетчик символов 0/300) и справа "Предпросмотр" (небольшой блок который будет выглядеть как push уведомление на телеофне: Иконка, Название, Текст уведомления). "Повторить уведомление за 2 дня до окончания акции" - если включено появляется: большое поле "Текст уведомления" (внизу справа под полем счетчик символов 0/300) и справа "Предпросмотр" (небольшой блок который будет выглядеть как push уведомление на телеофне: Иконка, Название, Текст уведомления).
Опция с ползунком (вкл/выкл) "Запустить акцию" (если выключено то карточка акции появляется на странице активных, но затемняется и будет написано крупным красным текстом "Акция не запущена", а если включено то сразу запускается и отображается нормально на странице активных акций).

Сделать аудитории клиентов: поиск по названию с иконкой лупы, кнопка "Создать аудиторию ". Ниже таблица: "Название", "Участники", "Возраст", "Пол", "Средний чек", "Дней с последней покупки", "Количество покупок", "Сумма покупок", "День рождения", "Дней с момента регистрации", "Устройство" (андроид или ios). При создании аудитории открывается окно (фон замыливается) с красным крестиком для закрытия окна. "Название" (Обязательное поле), для всех остальных ползунки (вкл/выкл), если выключено то вспомогательные элементы скрыты, появляются только прив включении полузнка: Посещал точку" - поле выбора из списка точек (вспомогательный элемент), в поле выбора чекбоксы напротив точек (чтобы можно было выбрать несколько точек), при выборе точки ее название появляется в поле (название точки заключается в серый блок, справа в блоке крестик для удаления из поля), также при добавлении точки в поле выбора в открывающемся списке она будет помечена зеленым цветом и в чекбоксе будет стоять галочка, в поле выбора справа также должен быть крестик для удаления сразу всех выбранных точек и иконка стрелки вниз (которая при нажатии на поле выбора сменяется на стрелку вверх (то есть когда открывается список выбора)). "Покупал товар" - и поле выбора товаров (оформление такое же как у "Посещал заведение"). "Пол" и две  кнопки-кружочки "Мужской" и "Женский" (расположены рядом по горизонтали) - вспомогательные элементы. "Возраст" - вспомогательный элемент: выбор диапазона от 0 до 100: два поля ввода - слева по дефолту 0, справа по дефолту 100, между ними полоса с двумя кружками по бокам которые можно двигать для регулировки граничных значений. "День рождения" и установка диапазона дней от и до дня рождения по аналогии с "Возраст". "Дней с момента регистрации" - выбор диапазона от 0 до 100 по аналогии. "Дней с последней покупки" - выбор диапазона от 0 до 365 по аналогии. "Количество покупок" - выбор диапазона от 0 до 1000 по аналогии. "Средний чек" - два поля ввода (перед первым полем слово "От", между первым и вторым слово "до") без полосы-ползунков. "Сумма покупок" - два поля ввода (перед первым полем слово "От", между первым и вторым слово "до") без полосы-ползунков.
"Уровень клиента" - поле выбора (оформление такое же как у "Посещал заведение").
"RFM Давность", "RFM Частота" и "RFM Деньги" расположены рядом по горизонтали и рядом с каждой полузнки (вкл/выкл), вспомогательные элементы - поле выбора (в каждом поле можно выбрать только одну позицию, нельзя как в предыдущих полях выбирать несколько).
"Устройство", вспомогательный элемент - поле выбора (Android, iOS, можно выбрать только одну позицию)
Для редактирования аудитории нужно кликнуть на строку аудитории: открывается окно как у создания, только еще добавляется кнопка "Удалить аудиторию" рядом с кнопкой "Сохранить", а также появляется разделы в окне "Настройки" (это дефолтное окно как при создании), и "Состав аудитории" - таблица №, Телефон, Имя, День рождения, Возраст, Дата регистрации. Также есть поиск ("Поиск по телефону или имени") с иконкой лупы.

Сделать систему отзывов - после начисления (от покупок, акции, промокоды не считаются)/списания баллов клиенту в миниаппе открывается окно "Оцените визит. Ваш отзыв помогает нам улучшить сервис." и пять желтых звездочек (сначала только контуры, после установления оценки выбранные звездочки закрашиваются) и поле ввода "Комментарий" (необязательное) и крестик для закрытия окна. В панели мерчанта раздел "Отзывы" (описание: Собирает статистику о качестве обслуживания. Позволяет улучшать сервис и оперативно реагировать на низкие оценки.
**В телеграм приложении:** после каждой покупки показывает окно запросом оценки о качестве обслуживания."). Чекбокс "Показывать только с комментариями", поле выбора "Торговая точка" (по дефолту "Все торговые точки"), поле выбора "Сотрудник" (по дефолту "Все сотрудники"). Ниже таблица Клиент (при нажатии переход в карточку клиента), Оценка, Комментарий, Сотрудник, Торговая точка, Дата и время визита.
Кнопка "Настройки" (В разделе "Отзывы"), открывается окно с красным крестиком для закрытия, фон замыливается: Поле выбора с ползунком (вкл/выкл) "Уведомлять при оценках" ("⭐⭐⭐⭐⭐ 5 звезд и ниже", "⭐⭐⭐⭐ 4 звезды и ниже", "⭐⭐⭐ 3 звезды и ниже", "⭐⭐ 2 звезды и выше", "⭐ 1 звезда"). "Отправлять оценки на электронную почту" с ползунком (вкл/выкл) - при включении ползунка появляется поле ввода и ниже подпись Можно указать несколько почт через запятую (тут нужно рассматривать случай если стоит пробел после запятой и если не стоит). Полузнок (вкл/выкл) "Оповещать об оценках в телеграм", ниже подпись "Подключить телеграм аккаунты для уведомлений можно настройках", слово "настройках" кликабельное - при нажатии на него перебрасывает на страницу "Уведомления в телеграм" (подраздел в разделе "Настройки" в мерчант панели. ). Ползунок "Улучшать отзывы о заведении на Яндекс.Картах, 2ГИС, Google" (ниже описание: "Если клиент поставит хорошую оценку, ему будет предложено перейти в другие сервисы и поделиться там своим отзывом."), при включении открываются вспомогательные элементы: поле выбора "Оценка при которой предлагать делиться отзывом в других сервисах" ("⭐⭐⭐⭐⭐ 5 звезд", "⭐⭐⭐⭐ 4 звезды и выше", "⭐⭐⭐ 3 звезды и выше", "⭐⭐ 2 звезды и выше", "⭐ 1 звезда и выше"), надпись "Сервисы в которых можно будет поделиться отзывом" (ниже описание: "Для каждой торговой точки необходимо задать ссылку на карточку объекта из сервиса отзывов, это можно сделать в настройке торговой точки в разделе «Торговые точки».", фраза "разделе «Торговые точки»" кликабельная, при нажатии на нее перебрасывает на раздел "Торговые точки") и три ползунка "Яндекс", "2ГИС", "Google". Кнопка "Сохранить".
— В карточке торговой точки на вкладке «Интеграции» доступны поля для ссылок (Яндекс, 2ГИС, Google). Эти ссылки используются в миниаппе, когда клиент ставит оценку выше настроенного порога.
На странице "Уведомления в телеграм" в "Настройки" описание "Вы можете получать уведомления в Telegram, для этого начните чат с ботом или добавьте его в групповой чат.",  две кнопки "Начать чат с ботом" (ссылка https://telegram.me/логин телеграм бота?start=токен), "Добавить бота в групповой чат" (ссылка https://telegram.me/логин телеграм бота?startgroup=токен). Ниже подпись "Вы также можете найти бота **логин телеграм бота** в Telegram и отправить ему сообщение **/start токен**". Ниже "Список пользователей и групп, которые получают уведомления о заказах и отзывах об обслуживании в Telegram." и список никнеймов подключенных в телеграм пользователей для данного мерчанта с кнопками "Отвязать" рядом с каждым никнеймом. Логин телеграм бота - это мой общий бот для уведомления всем мерчантам (идентификация мерчантов происходит при помощи токена при старте), для этого в панели админа (не мерчант панель, а админ панель) нужно установить токен бота из BotFather.

Сделать раздел "Аналитика" - подразделы: "Сводный отчет" (стиль графика и остального как в текущем "Дашборд"), "По времени", "Портрет клиента", "Повторные продажи", "RFM-анализ", "Активность торговых точек", "Активность сотрудников", "Реферальная программа".
## Сводный отчёт
- **Заголовок:** «Сводный отчёт».
- **Фильтры:** выбор периода.
- **Карточки-метрики под фильтрами:**
    - «Регистрации» — число регистраций за период.
    - «Продажи» — число продаж за период.
    - «Сумма продаж» — сумма продаж за период (₽).
- **Главный график-линия по дням** с тремя сериями: «Регистрации», «Количество продаж», «Сумма продаж».
    - Внизу ползунок-скролл по временному отрезку.
- **Блок «Бизнес-метрики»:**
    - «Средний чек» (₽) — берётся за всё время использования программы лояльности.
    - «Частота визитов» — показатель для участников с ≥3 покупками (отображается, когда есть данные).
- **Подвал/сервисные элементы:** легенда к графику, подписи осей.
## По времени
- **Заголовок:** «Распределение по времени».
- **Фильтры:** выбор периода.
- **Секции:**
    1. **«Время с последней покупки»** — распределение по неделям (гистограмма/лайн).
    2. **«По дням недели»** — 7 столбцов; в легенде: «Средний чек», «Количество продаж», «Сумма».
    3. **«По часам»** — распределение в разрезе часов суток с теми же метриками.
    4. **«Подробно по дням-часам»** — детализированная гистограмма/тепловая карта по дням и часам.
- **Низ страницы:** ползунок-скролл; легенда для серий.
## Портрет клиента
- **Заголовок:** «Портрет клиента».
- **Фильтры:** выпадающее поле «Аудитории» (выбор сохранённой аудитории).
- **Карточки/графики:**
    - **«Пол»** — диаграмма (доля М/Ж) + вспомогательные бары с «Средний чек», «Количество продаж», «Сумма продаж».
    - **«Возраст»** — распределение клиентов по возрасту (гистограмма/линия).
    - **«Зависимость пола и возраста»** — комбинированный график/тепловая карта (пересечение М/Ж×возраст).
- **Примечание:** при смене «Аудитории» все графики пересчитываются.
## Повторные продажи
- **Заголовок:** «Повторные продажи».
- **Фильтры:
    - Выбор периода.
    - Выпадающее «Все торговые точки».
- **Плашки-счётчики:**
    - «Уникальных покупателей».
    - «Новых покупателей».
    - «Повторных покупателей».
- **Тумблер:** «Скрывать статистически недостоверные данные» (вкл/выкл). (пояснительная иконка вопросительного знака в кружке, при наведении показывает окошко с текстом: "Скрывает данные, которые превышают статистическую погрешность в 1%.")
- **График:** «Покупок на покупателя» — столбец/распределение по количеству покупок на 1 уникального клиента.
## Динамика
- **Заголовок:** «Динамика».
- **Фильтры:
    - Выбор периода.
    - Кнопки группировки: **«День»**, **«Неделя»**, **«Месяц»**, **«Квартал»**, **«Год»** (подсветка текущей).
- **Графики (последовательно):**
    1. **«Средний чек»** — линия со значениями в ₽.
    2. **«Баллы»** — комбинированная диаграмма с сериями:
        - «Начислено»,
        - «Списано»,
        - «Сгорело»,
        - «Баланс».
## RFM-анализ
- **Заголовок:** «RFM-Анализ».
- **Описание блока:** краткая справка, что такое RFM и для чего (для чайников, без сложных слов).
- **Таблица «Группы RFM»:**
    - Колонки: «# Группы», «Давность?», «Частота?», «Деньги?».
    - Значения по диапазонам (например: «0–92 дней», «>4 покупок», «> 9 008 ₽» и т.п.).
        
- **Таблица «Размер RFM-групп»:**
    - Колонки: «Группа (R-F-M)», «Клиентов».
    - Список правил вида «0-0-0», «0-1-1», «1-1-1» и их численность.
- **Кнопка-ссылка «Настройки»** → **всплывающее окно** «Границы RFM-сегментов» (см. ниже).
### Границы RFM-сегментов (всплывающее окно)
- **Поля:
    - «Recency (давность в днях)» — числовое поле (по умолчанию 365).
    - «Frequency (частота)» — выпадающий список («Автоматически» или вручную задать пороги).
    - «Money (сумма чека)» — выпадающий список («Автоматически» или вручную указать верхнюю границу).
- **Кнопки:** «Сохранить» (активна при изменениях), красный крестик — закрыть.
## Активность торговых точек
- **Заголовок:** «Активность торговых точек».
- **Фильтры:** выбор периода.
- **Таблица:**
    - «#»,
    - «Торговая точка»,
    - «Продажи»,
    - «Сумма продаж, ₽»,
    - «Средний чек, ₽»,
    - «Начисленные баллы»,
    - **«Списанные баллы»**,
    - «Покупателей?» (количество покупателей за период),
    - «Новые клиенты».
        
- **Строка ИТОГО** внизу таблицы — суммарные показатели по всем точкам.
## Активность сотрудников
- **Заголовок:** «Активность сотрудников».
- **Фильтры:**
    - Выбор периода.
    - Чекбокс «Объединить торговые точки» (суммирует по сотруднику вне зависимости от точки).
    - Выпадающее «Торговая точка» (по умолчанию «Все»).
- **Таблица:**
    - «Сотрудник»,
    - «Филиал»,
    - «Очки/оценки работы» (счётчик внутренней метрики — показывается числом),
    - «Продажи»,
    - «Сумма продаж, ₽»,
    - «Средний чек, ₽»,
    - «Начисленные баллы»,
    - «Списанные баллы»,
    - «Выдано подарков за штампы»,
    - «Новые клиенты».
## Реферальная программа
- **Заголовок:** «Реферальная программа».
- **Фильтры:**
    - Выбор периода,
    - Быстрые вкладки: **«Вчера»**, **«Неделя»**, **«Месяц»**, **«Квартал»**, **«Год»** (подсветка текущей).
- **Плашки-счётчики:**
    - «Зарегистрировано» (с помощью реферальной программы),
    - «Совершили покупку» (приведённые клиенты),
    - «Выручки сгенерировано» (₽).
- **Кнопка «Настроить»** → переход на страницу настроек реферальной программы (уже реализовано в панели мерчанта)
- **Таблица «Пользователи, пригласившие больше всех за период»:**
    - «№»,
    - «Имя/Ник»,
    - «Приглашено» (кол-во)

Страница «Механики»
Заголовок: Механики.
Сетка карточек, у каждой:
Иконка и название механики.
Короткое описание.
Клик по карточке или названию → открывает страницу механики.
Список карточек:
Уровни клиентов
Ограничения в баллах за покупки
Автовозврат клиентов, Ползунок вкл/выкл
Поздравить клиентов с днём рождения, Ползунок вкл/выкл
Баллы за регистрацию, Ползунок вкл/выкл
Напоминание о сгорании баллов, Ползунок вкл/выкл
Реферальная программа

Страница «Уровни клиентов»
Хлебные крошки: Механики → Уровни клиентов.
Поясняющий блок (текст о порогах переходов и отображении статуса).
Кнопка «Добавить группу» → открывает страницу создания уровня.
Таблица уровней:
Колонки: Название, Сумма покупок? (порог перехода), % начисления, % списания?, Стартовая, Скрытая, Клиентов, Действия.
Действия: Редактировать (карандаш).
Пагинация/строка «Показаны записи … из …».
Страница «Создание уровня»
Поля:
Название (input).
% начисления (число).
% списания от чека (число).
Минимальная сумма к оплате (число).
Сумма покупок (число; порог автоматического перевода).
Чекбоксы: Стартовая, Скрытая группа (с пояснением, что видна только членам/перевод вручную или по промокоду).
Кнопка «Создать».
Страница «Редактирование уровня»
Те же поля, заполнены текущими значениями.
Кнопки: «Сохранить», опционально «Удалить» (если политика позволяет).
при нажатии на позицию в таблице уровней открывается эта страница:
## Структура страницы
### 1) Шапка
- **Заголовок**: название уровня (например, _VIP_).
- **Кнопка «Редактировать»** — открывает форму редактирования уровня (те же поля, что при создании уровней клиентов).
- Подсказка: _«Удалить можно группу, в которой нет клиентов»_ (кнопка удаления показывается/активируется только если состав пуст).
### 2) Карточка параметров уровня (read-only)
Табличный блок с ключевыми полями:
- **ID** — системный идентификатор уровня.
- **Название** — человекочитаемое имя (например, VIP).
- **% начисления** — базовый процент бонусов от суммы чека.
- **% списания от чека** — максимальная доля оплаты бонусами.
- **Сумма покупок** — порог накопленных покупок для автоматического перехода на уровень.
- **Стартовая группа** — «Да/Нет». Если «Да», присваивается при регистрации.
- **Скрытая группа** — «Да/Нет». Скрытые уровни не видны всем, перевод возможен вручную/по промокоду.

> Все значения здесь только для просмотра. Для изменения — кнопка «Редактировать».
### 3) Корректировки начисления
Позволяет задать **локальные правила** для отдельных торговых точек.
- Заголовок: **«Корректировки начисления»**. Если нет — показывается «Нет корректировок».
- Подзаголовок/форма **«Добавить корректировку»**:
    - **Филиал** — выпадающий список торговых точек.
    - **% начисления** — локальный процент (перекрывает базовый для этого филиала).
    - **% списания** — локальный лимит списания (перекрывает базовый для этого филиала).
    - **Кнопка «Добавить»** — сохраняет корректировку и выводит её в список ниже.

**Список корректировок** (после добавления):
- Колонки: _Филиал • % начисления • % списания • Действия (Редактировать/Удалить)_.
- Валидация при сохранении:
    - Проценты — число от 0 до 100 (включительно, допускаются десятичные).
    - Нельзя создавать дубликаты по одному и тому же филиалу.
- Удаление — с подтверждением.
### 4) Состав группы
Таблица клиентов, которые **сейчас** находятся на уровне. Обновляется несколько раз в сутки.
- Колонки: **Логин** (телефон/ID), **Имя**, **День рождения**, **Возраст**.
- Строка кликабельна: переходит в **личную карточку клиента**.
- Пустое состояние: «Пока в группе нет клиентов».
- Если список длинный — пагинация по страницам.

Страница «Ограничения в баллах за покупки»
Хлебные крошки: Механики → Ограничения…
Заголовок и поясняющий блок (что настраивается).
Переключатели и поля:
Ограничить срок жизни баллов за покупки (вкл/выкл) + ? тултип.
Поле: Через сколько дней баллы за покупки сгорят (число).
Запретить списывать и начислять баллы одновременно в чеке (вкл/выкл).
Задержка начисления баллов (вкл/выкл).
Поле: Баллы можно использовать через указанное количество дней (число).
Кнопка «Сохранить».

Страница «Автовозврат клиентов»
Хлебные крошки: Механики → Автовозврат клиентов.
Переключатель вверху: Включить сценарий (вкл/выкл).
Вкладки: Основное | Статистика.
Вкладка «Основное»
Поля:
Через сколько дней попытаться вернуть клиента (число).
Текст push-рассылки (многострочный input, счётчик символов 0/300; подсказки по плейсхолдерам: %username%, %bonus%).
Подарить баллы клиенту (вкл/выкл)
Поле: Сколько баллов подарить клиенту (число).
Сделать подарочные баллы сгораемыми (вкл/выкл)
Поле: Через сколько дней баллы сгорят (число).
Повторять попытку возврата (вкл/выкл).
Кнопка «Сохранить».
Вкладка «Статистика»
**Фильтры и период**
- Выпадающий список **«Все торговые точки»**.
- Быстрый выбор периода: **Вчера / Неделя / Месяц / Квартал / Год** + календарь для произвольного интервала.
- На графиках есть **«Детализация по дням»** (меняется на недели/месяцы).
**KPI “В момент возврата”** (что произошло сразу после отправки):
- **Выслано приглашений** — сколько push-уведомлений отправлено.
- **Вернулось** — сколько клиентов совершили покупку после приглашения.
- **Конверсия в покупку** — доля вернувшихся от приглашённых.
- **Затраты на баллы** — сколько подарочных баллов было потрачено.
- **Выручка первых покупок** — выручка с первых чеков вернувшихся (с учётом вычета потраченных баллов).
**KPI “На дистанции”** (поведение после возвращения):
- **Клиентов** — число покупателей, совершивших покупку после возврата.
- **Покупок после возврата** — среднее число покупок на одного такого клиента.
- **Количество покупок** — суммарно за период.
- **Сумма покупок** — общая выручка от вернувшихся клиентов.
- **Средний чек** — средняя сумма чека у вернувшихся.
**По RFM-группам**  
Таблица с сегментами по давности последней покупки и активностью:
- **Недавние** (<92 дня), **Умеренные** (92–184), **Засыпающие** (184–276), **Спящие** (276–368), **Потерянные** (>368).  
    Для каждого сегмента: **«Выслано приглашений»** и **«Вернулось»**.
**Графики**
- **«Возвраты и покупки»** — динамика по дням: серия _Попыток возврата_ и серия _Вернулось_.
- **«Вернувшиеся по RFM группам»** — как менялось число возвратов в каждом сегменте.
- **«Общая выручка»** — сравнение _выручки всех вернувшихся клиентов_ и _выручки первых покупок_. Легендой можно включать/выключать серии.

Страница «Поздравить клиентов с днём рождения»
Хлебные крошки: Механики → Поздравить клиентов с днём рождения.
Переключатель: Включить сценарий (вкл/выкл).
Вкладки: Основное | Статистика.
Вкладка «Основное»
Поля:
За сколько дней поздравлять клиента (число).
Переключатель Поздравлять только тех клиентов, которые ранее совершали покупки (вкл/выкл).
Текст push-рассылки при поздравлении (textarea, 0/300; подсказки по плейсхолдерам как выше).
Подарить баллы клиенту (вкл/выкл)
Сколько баллов подарить клиенту (число).
Сделать подарочные баллы сгораемыми (вкл/выкл)
Через сколько дней баллы сгорят (число).
Кнопка «Сохранить».
Вкладка «Статистика»
Фильтры (как у «Автовозврата»):
Быстрые периоды: Вчера / Неделя / Месяц / Квартал / Год.
Диапазон дат (календарь).
Торговая точка (выпадающий).
Карточки-счётчики:
Выслано поздравлений,
Совершивших покупку,
Выручки сгенерировано (₽),
Средний чек (₽),
Затраты на баллы (₽).
Графики:
Поздравления и покупки (2 серии).
Выручка.

Страница «Баллы за регистрацию»
Хлебные крошки: Механики → Баллы за регистрацию.
Переключатель: Включить механику (вкл/выкл).
Поля:
Сколько баллов начислять за регистрацию (число).
Сделать начисляемые баллы сгораемыми (вкл/выкл).
Отложить начисление баллов (вкл/выкл).
Кнопка «Сохранить».

Страница «Напоминание о сгорании баллов»
Хлебные крошки: Механики → Напоминание о сгорании баллов.
Переключатель: Уведомлять клиентов о скором сгорании подарочных баллов (вкл/выкл).
Поля:
За сколько дней отправлять сообщение (число, «дней»).
Текст push-уведомления о скором сгорании подарочных баллов (textarea, 0/300; подсказки по плейсхолдерам: %username%, %amount%, %burn_date%).
Предпросмотр уведомления (карточка-макет с текстом push).
Кнопка «Сохранить».

Страница «Реферальная программа»
Хлебные крошки: Механики → Реферальная программа.
Переключатель: Включить сценарий (вкл/выкл).
Блок «Приглашающий»
За что поощрять? (радио):
За первую покупку друга,
За все покупки друга.
Тип поощрения (радио):
Фиксированное количество баллов,
Процент от суммы покупки.
Тумблер Многоуровневая система поощрения (вкл/выкл) — пояснение, что награда идёт за друга и приглашённых им людей при их покупках.
Поле Размер поощрения:
если выбран фиксированный тип — число в баллах,
если процент — число в %.
Визуальный помощник-схема (иконки «Приглашающий → Друг»).
Блок «Друг»
Поле Сколько баллов получит приглашённый друг? (число).
Чекбокс Суммировать баллы по реферальной программе и баллы за регистрацию (при включении подсказка с примером суммы).
Блок «Настройка сообщения по приглашению»
Текстовое поле Текст сообщения при нажатии на кнопку «Пригласить друга» (textarea, 0/300).
Подсказки-плейсхолдеры:
{businessname} — название бизнеса (ссылка в настройки).
{bonusamount} — количество баллов для друга.
{code} — промокод приглашающего.
{link} — ссылка для установки карты лояльности.
Кнопка «Сохранить».

# Акции
## Список акций
- Заголовок: **Акции**.
- Вкладки: **Предстоящие** | **Текущие** | **Прошедшие** (подсветка активной).
- Над таблицей:
    - «Всего: N записей».
    - Поле **Поиск по названию** (лупа).
    - Справа кнопка **Создать акцию** → **модальное окно (2 шага)**.
- Таблица (чекбоксы строк слева):
    - **Акция** (название; под названием — бейджи условий, напр.: _Акционные баллы на товары, бессрочная_).
    - **ROI** с иконкой **?** (тултип с формулой).
    - **Выручка** с **?** (тултип о расчёте).
    - **Расходы** с **?** (тултип о начисленных/потраченных баллах).
    - **Покупок** с **?** (тултип).
    - В конце строки **меню «…»**: Просмотр, Редактировать, Поставить на паузу/Запустить, Перенести в архив, Дублировать, Удалить. 
- Клик по названию → просмотр карточки акции (read-only с теми же полями).
## Создать акцию (модальное, шаг 1: выбор типа)
- Заголовок модалки: **Создание акции**.
- Плитки типов:
    - **Акционные баллы на товары** (описание: особые правила начисления).
    - (пространство под будущие типы).
- Кнопки: **Выбрать** (по плитке), **Отмена** (крестик).
    

## Создать акцию → «Акционные баллы на товары» (модальное, шаг 2: настройки)
- Переключатель вверху: **Включить акцию** (вкл/выкл).
- **Название акции** (input; подсказка «Например: Двойные баллы на чёрный кофе»).
- **Выберите товары**, на которые действуют особые условия (мультиселект; поиск; теги выбранных товаров; крестики для удаления).
- **Правила начисления баллов** (радио, применяется только к выбранным товарам):
    - **Начислить фиксированное количество баллов** → поле **Баллов** (число).
    - **Процент от цены товара** → поле **%** (число 0–100).
    - **Умножить уровень покупателя** (например, «баллы ×2») → поле **Множитель** (число ≥1).
        
- **Ограничения**:
    - **Даты акции**:
        - Тумблер **Начало** (вкл/выкл) + кнопка даты (значение по умолчанию «Сразу», рядом крестик для сброса).
        - Тумблер **Окончание** (вкл/выкл) + кнопка даты (значение по умолчанию «Бессрочно», рядом крестик для сброса).
    - **Кому доступна акция (аудитории)** — селект аудиторий; рядом **иконка обновить** (вращ. стрелка); подпись: «Если не нашли подходящую аудиторию, можно _создать новую_» (_создать новую_ — ссылка на страницу «Аудитории»).
    - **Сколько раз покупатель может воспользоваться акцией** — селект: «Без ограничений» / «1 раз» / «N раз».
- Кнопки: **Создать** (активна при валидных полях), **Отмена** (крестик).
# Журнал начисления баллов
## Список операций
- Заголовок: **Журнал начисления баллов**.
- Строка «Всего: N записей».
- Фильтры (в одну линию):
    - **Дата** (диапазон, календарь).
    - **Сотрудники**: «Текущие и бывшие сотрудники» (селект).
    - **Все менеджеры** (селект по сотрудникам).
    - **Все торговые точки** (селект).
    - **Тип операции** (селект: **Все операции** / **Покупка** / **Регистрация** / **День Рождения** / **Автовозврат**).
    - **Списания и начисления** (селект: оба / только начисления / только списания).
    - **Все носители** (селект способа предъявления).
    - **Поиск по номеру чека** (input с лупой).
- Список строк (каждая кликабельна):
    - Слева дата и время.
    - Блок «Торговая точка»; ниже **Клиент** (ссылка в карточку клиента) и **Менеджер**.
    - Блок рейтинга (пустые/заполненные звёзды).
    - Справа три колонки:
        - **– Списано** (красным, баллы),
        - **+ Начислено** (зелёным, баллы, подпись источника: «Начислено по акции: {код}», «Промокод …», «Регистрация»),
        - **Сумма чека, ₽**.
- Пагинация.
## Просмотр операции (модальное)
- Заголовок: **{Дата} {Время}**.
- Поля:
    - **Торговая точка**.
    - **Клиент** (ссылка), **Менеджер**.
    - **Носитель (способ предъявления)**: название + код.
    - **Бонусные баллы**:
        - **Начислено**: +N,
        - **Списано**: –M.
    - **К оплате**, **Оплачено баллами**, **Итого** (₽).
- Кнопка **«Отменить транзакцию»** (если права позволяют).
- Красный крестик для закрытия.
# PUSH-рассылки
## Список
- Хлебные крошки: Главная / **PUSH-рассылки**.
- Вкладки: **Активные** | **Архивные** (подсветка активной).
- Справа кнопка **Создать рассылку** → **модальное окно**.
- **Активные**: пустое состояние при отсутствии (текст + кнопка «Создать рассылку»).
- **Архивные**:
    - Таблица: **Дата начала отправки**, **Текст уведомления**, **Аудитория**, **Статус**.
    - (Опционально в строках меню «…»: Просмотр, Дублировать, Удалить.)
## Создать PUSH-рассылку (модальное)
- Поля:
    - **Текст** (textarea; счётчик символов 0/300).
    - **Аудитория** — селект (по умолчанию «Всем клиентам»; можно выбрать аудиторию).
    - **Дата начала отправки** — дата+время (с подписью «время по {таймзона}»).
- Кнопки: **Создать**, **Отмена** (крестик).
# Telegram-рассылки
## Список
- Заголовок: **Telegram-рассылки**.
- Вкладки: **Активные** | **Архивные**.
- Справа кнопка **Создать Telegram-рассылку** → **модальное окно**.
- **Активные**: пустое состояние (текст + кнопка «Создать Telegram-рассылку»).
- **Архивные** — таблица:
    - **Дата начала отправки**, **Изображение**, **Текст**, **Аудитория**, **Статус**, **Всего отправлено**, **Успешно**, **Ошибок**.
    - Меню «…» (Просмотр, Дублировать, Удалить).
# Telegram-рассылки → «Создать Telegram-рассылку» (модальное окно)
Открывается всплывающее окно (фон замыливается, в правом верхнем углу красный крестик для закрытия).
- Заголовок окна: **Создать Telegram-рассылку**.
- Поле **Аудитория** (выпадающий список): «Всем клиентам» (по умолчанию) + группы из раздела «Аудитории». Подсказка под полем: «Рассылку получат только те участники аудитории, которые ранее взаимодействовали с Telegram-ботом».
- Информационный блок (недоступен для редактирования): **Общее количество Telegram-пользователей в системе: N**.
- Поле **Дата начала отправки (Москва, GMT+3)**: комбинированный дата-пикер + выбор времени.
- Большое поле **Текст** (счётчик оставшихся символов справа «Осталось символов: 512»).
- Блок **Загрузите изображение** (необязательно): превью-плейсхолдер 1200×800, кнопка **Выбрать** (загрузка JPEG/PNG, ограничение по размеру файла).
- Кнопки внизу: **Сохранить** (основная), **Отмена** (второстепенная; дублирует крестик).
- Валидации: обязательны «Аудитория» и «Текст»; дата не может быть в прошлом; при превышении лимита символов показывается ошибка; при загрузке неподдерживаемого формата/размера — ошибка.
- После сохранения: запись попадает на вкладку «Активные» списка рассылок с полями **Дата начала**, **Изображение**, **Текст**, **Аудитория**, **Статус**, **Всего отправлено**, **Успешно**, **Ошибок**. Действия по строке: «Отменить отправку» (до старта), «В архив», «Дублировать».
# Мотивация персонала (страница)
- Тумблер **Включить функцию** (описание сверху о смысле механики).
- Блок **Настройки начисления очков сотрудникам**:
    - Числовое поле **За нового клиента**.
    - Числовое поле **За существующего клиента**.
- Блок **Настройки отображения рейтинга в панели кассира:
    - Поле **За какой период отобразить начисленные сотрудникам очки** (выпадающий список: «Свой период» / «Неделя» / «Месяц» и т. п.).
    - При выборе «Свой период» — числовое поле **N дней**.
- Справа — статический **предпросмотр экрана кассира (оставить рамку под фото).
- Кнопка **Сохранить** (неактивна, если нет изменений).
# Защита от мошенничества (страница)
- Инфоблок о том, что события только уведомляют, но не блокируют операции.
- Поля-ограничения:
    - **Покупателю начислены бонусы более N раз за день** (число).
    - **… более N раз за месяц** (число).
    - **Максимальное кол-во баллов для начисления** (число).
- Блок **Контакты для уведомлений**:
    - Поле **Email** (поддерживает несколько адресов через запятую, допускается пробел после запятой).
    - Тумблер **Уведомлять администраторов торговых точек** (дублирование на email администраторов).
- Кнопка **Сохранить**.
# Клиенты (список)
- Верхние кнопки: **Добавить клиента**, **Импортировать клиентов**.
- Таблица со столбцами и inline-фильтрами под заголовком:
    - **#**, **Логин** (телефон), **Имя**, **Электронная почта**, **Частота визитов**, **Средний чек**, **День рождения**, **Возраст**.
    - В правом краю строки — иконка **Редактировать**; клик по логину/имени открывает карточку клиента.
- Пагинация и счётчик «Показаны записи X-Y из Z».
## «Добавить клиента» (модальное окно)
Открывается по кнопке, фон замыливается, красный крестик для закрытия.
- Поля:
    - **Логин** (телефон).
    - **Пароль или пин-код**, **Повторите пароль или пин-код** (можно оставить пустым при редактировании).
    - **Email**.
    - **Имя**, **Фамилия**.
    - **Теги** (текст с подсказкой по разделителю).
    - **День рождения** (дата-пикер).
    - **Группа клиентов** (выпадающий список).
    - Чекбокс **Блокировать начисления**.
    - **Пол** (выпадающий: «Мужской», «Женский», «Не указан»).
    - **Комментарий к пользователю** (виден только администратору).
- Кнопки: **Создать** / **Отмена**.
- Валидации: уникальность логина, совпадение паролей, корректный email/дата.
## Импортировать клиентов → «Загрузка данных» (страница)
- Инструкции и требования: формат CSV, UTF-8, разделитель «;».
- Таблица структуры файла (A-K) с описаниями:
    - **A** ID клиента во внешней среде (опц.)
    - **B*** Номер телефона (обяз., ≥11 цифр, произвольное форматирование)
    - **C** ФИО (опц.)
    - **D** Дата рождения (опц.)
    - **E*** Количество баллов (обяз., если нет данных — 0)
    - **F** Всего покупок/сумма (опц.)
    - **G** Дата транзакции (если пусто — дата обработки файла)
    - **H** № чека (опц.)
    - **I** Количество накопленных штампов (опц.)
    - **J** ID группы начисления баллов (опц.)
    - **K** Email клиента (опц.)
- Элемент загрузки файла + кнопка **Импортировать**; журнал ошибок парсинга с указанием строки/столбца.
# Карточка клиента (страница)
Верхние кнопки-действия: **Редактировать**, **Начислить баллы**, **Списать баллы**, **Начислить комплиментарные баллы**.
- Блок «Профиль» (таблица ключ-значение): Логин, Имя, Бонусных баллов, Отложенных баллов, Пол, Возраст, Дата рождения, Дней с последнего визита, Частота визитов, Средний чек, Уровень, Сумма покупок (прошлый/текущий месяц и за всё время), Накопленных штампов, Теги, Дата регистрации, Комментарий к пользователю, Блокировка начислений, Приглашавший.
- Блок **Срок действия баллов**: таблица начислений с датами сгорания.
- Блок **История операций с баллами**:
    - Таблица: **#**, **Сумма покупки**, **Баллов** (плюс/минус), **Подробности/Основание**, **Дата/время**, **Торговая точка**, **Оценка**.
    - Клик по строке открывает всплывающее окно «Транзакция» (детали начислено/списано, к оплате, оплачено баллами, итог, носитель, менеджер). Кнопка **Отменить транзакцию**.
- Блок **Отзывы клиента** (таблица оценок, если есть).
- Блок **Пригласил клиентов**: ссылка (или промокод клиента), таблица приглашённых.
# Начисление баллов (модальное окно)
Доступно из карточки клиента и через быстрые действия.
- Блок **Информация о клиенте**: **Телефон клиента** (автозаполнен), **# Клиента**, **# Устройства** (опц.).
- Блок **Информация об операции**:
    - **Сумма покупки** (число/копейки).
    - **# чека** (опц.).
    - **Какое количество баллов начислить** (опциональный ручной ввод; подсказка: оставить пустым для автоматического расчёта).
    - **Торговая точка** (выпадающий список).
- Кнопки: **Создать**, **Отмена**. Валидации: положительная сумма, существующий клиент, доступная точка.
# Списание баллов (модальное окно)
- Блок **Информация о клиенте**: **Телефон клиента**, **# Клиента**, **# Устройства** (опц.)
- Блок **Информация об операции**:
    - **Какое количество баллов списать** (число; не больше доступного баланса).
    - **Торговая точка** (выпадающий список).
- Кнопки: **Создать**, **Отмена**. Проверка баланса и правил списания.
# Начисление комплиментарных баллов
**Страница (не модалка).** Доступ: из карточки клиента и из раздела «Клиенты» → действие «Начислить комплиментарные баллы».
**Поля и поведение:**
- **Телефон клиента** — disabled, префилл из источника навигации. Маска `+7 (XXX) XXX-XX-XX`.
- **Начислить баллов** — обязательное число > 0 (целые). Валидация и подсказка под полем при ошибке.
- **Через сколько дней баллы сгорят** — обязательное число ≥ 0. Значение **0** = «бессрочно». Показываем подсказку: «Укажите 0, если срок действия баллов не ограничен».
- **Комментарий к операции** — опционально, до 255 символов, виден клиенту в истории.
- **Кнопка «Начислить»** — активна при валидной форме.
    - Успех: toast «Баллы начислены», редирект на карточку клиента (якорь «История операций») + мгновенное обновление баланса.
    - Ошибка (например, клиент не найден, сетевой сбой): toast c текстом из бэкенда, кнопка остаётся активной.
# Товары
## Список
- Фильтры:
    - **Категория** (дропдаун «Все категории»).
    - **Статус** (дропдаун «Все товары»: "Отображаются в каталоге", "Не отображаются в каталоге").
    - **Правила баллов** (дропдаун: «С начислением баллов», «Без начисления баллов»).
    - **Поиск** по названию/артикулу.
- Таблица: чекбокс, превью, **Название**, **Категория**, **Покупок за месяц**, **Покупок всего**, **Артикул**.
- Пустое состояние — иллюстрация + кнопка **«Добавить товар»**.
- Массовые действия (после выбора чекбоксов): скрыть/показать в каталоге, разрешить/запретить оплату баллами, удалить (с подтверждением).
## Добавление товара (страница с табами)
Табы: **Основное**, **Каталог и характеристики**, **Цены и остатки**.
### Вкладка «Основное»
- **Название товара** — обязательно.
- **Артикул** — необязательно (может генериться бэком).
- **Категория** — дропдаун.
- **Правила для баллов:**
    - Тоггл **«Начислять баллы за товар»** (вкл по умолчанию).
    - Тоггл **«Разрешить платить баллами за товар»** (вкл по умолчанию).
    - **Какую часть товара можно оплатить баллами, %** — число 0…100 (по умолчанию 100).
- Кнопка **«Далее»** сохраняет черновик и переводит на следующий таб.
### Вкладка «Каталог и характеристики»
- **Порядок** — число (чем меньше, тем выше в списке/каталоге).
- **Связанный товар в iiko (Delivery)** — селект, необязателен.
- Тоггл **«Этот товар имеет варианты»** — при включении показываем менеджер вариантов (названия/цены/артикулы/характеристики).
- **Изображения товара** — галерея, загрузка drag&drop, рекомендация 1000×1000. Возможность менять порядок, удалять.
- **Описание** — WYSIWYG.
- Блок **Цена**:
    - Тоггл **«Цена»** (скрыть цену в карточке).
    - Поле **Цена, ₽** (обязательно, если цена включена).
    - Тоггл **«Запретить добавление в корзину»**.
- **Габариты**: Вес (кг/г), Высота/Ширина/Глубина (см) — опционально.
- **Пищевая ценность** (на 100 г/мл): Белки/Жиры/Углеводы (г), Калорийность (ккал) — опционально.
- **Маркерные теги** (переключатели): Новинка, Популярный, Острое, Для вегетарианцев.
- Тоггл **«Отображать товар в каталоге»** — вкл по умолчанию.
- Кнопки: **«Сохранить и опубликовать»**, **«Удалить товар»** (подтверждение).
### Вкладка «Цены и остатки»
- Поля/таблица цен по складам/точкам (если применимо), остатки.
- Сохранение без переключения табов. Валидации числовых значений.
# Категории
## Список
- Колонки: превью, **Название категории**, **Порядок** (кнопки ↑/↓ или drag&drop).
- Кнопка **«Создать категорию»**.
## Создание категории (страница)
- **Название** — обязательно.
- **Изображение** — одно, рекомендация 1200×1200 (1:1).
- **Описание** — WYSIWYG.
- **Адрес (slug)** — латиница/дефис, автогенерация из названия с возможностью правки, проверка уникальности.
- **Родительская категория** — дропдаун (для вложенности).
- Кнопка **«Создать»**. Успех — возврат в список, toast.
# Торговые точки
## Список
- Табы: **Работают**, **Не работают**.
- Поиск по названию.
- Карточка: **Название**, адрес (город, улица, дом). Клик — переход в профиль точки.
- Кнопка **«Добавить торговую точку»** — страница создания: название, адрес, расписание (если есть), статус «работает/не работает», контакты, привязка к интеграциям (если нужно). Сохранение — в список.
- # Создание торговой точки:
Где найти: **Торговые точки → Добавить торговую точку**.
## Вкладка «Основное»
- **Работает** — включите, если в этой точке будут идти начисления/списания и она участвует в заказах.
- **Скрыть торговую точку от клиентов** — используйте для склада/даркстора. Точка не показывается в приложении и картах Wallet, но может принимать онлайн-заказы, если входит в зону доставки.
- **Название** — укажите понятное имя (например, «Тили-Тесто, Московской 56»). Показывается пользователям.
- **Описание** — кратко как добраться/где вход, важные особенности (парковка, 2 этаж и т.п.).
- **Контактный телефон** — номер, по которому клиент сможет позвонить в точку.
- **Адрес** — начните вводить и выберите подсказку; при необходимости нажмите **«Поставить маркер вручную»** и скорректируйте точку на карте.
- **Почта администратора** — служебные уведомления (не видна клиентам). Можно несколько адресов через запятую.
Нажмите **Создать** (или **Сохранить**, если редактируете).
## Вкладка «Режим работы»
- **Часовой пояс** — выберите локальный для точки.
- **Отображать расписание** — включите, чтобы время работы показывалось в приложении/Wallet.
- **График работы
    - Вариант **«Работает круглосуточно»** — ничего больше заполнять не нужно.
    - Либо задайте время по дням: для закрытых дней выключите тумблер дня, для рабочих — укажите интервал «с/по» (иконка часов откроет выбор времени).
- Нажмите **Сохранить**
## Вкладка «Интеграции»
- **Внешний ID / BranchID / IDBranch** — уникальный идентификатор точки из вашей кассы/POS.  
    Обязательно заполните при интеграции: по нему операции из кассы попадут в верную точку.
- Нажмите **Сохранить**.


Обновить plan.md в соответствии с новой структурой мерчант панели, это касается не только фронтенда, но и бэкенда, проверить текущую реализацию проекта на соответствие новой структуре, убрать неактуальный для новой структуры код. Для фронтенда использовать современный красивый дизайн, единый стиль. ОБЯЗАТЕЛЬНО: Проверить чтобы в моем апи были реализованы все функции не хуже чем здесь: https://getmeback.ru/upload/integrations/rest/gmb_api.pdf
и здесь: https://getmeback.ru/upload/integrations/rest/gmb_catalog_api.pdf
Если в моем апи чего-то не хватает из того что указано по ссылкам выше, значит нужно реализовать. ОБЯЗАТЕЛЬНО: Интеграции моей программы лояльности должны происходить аналогично тому как это описано в следующих ссылках:
https://getmeback.ru/upload/integrations/1c/unf/1c_unf.pdf
https://getmeback.ru/upload/integrations/rkeeper/plug.pdf
https://getmeback.ru/upload/integrations/rkeeper/kassir.pdf
https://help.getmeback.ru/evotor
https://help.getmeback.ru/evotor_kassir
https://getmeback.ru/upload/integrations/1c/ut/1c_plug.pdf
https://getmeback.ru/upload/integrations/commerceml/commerceml.pdf
https://getmeback.ru/upload/integrations/1c/roznica/1c_roznica.pdf
https://getmeback.ru/upload/integrations/1c/roznica/1cr_kassir.pdf
https://getmeback.ru/upload/integrations/iiko/delivery.pdf
https://getmeback.ru/upload/integrations/moysklad/plug.pdf
https://getmeback.ru/upload/integrations/moysklad/kassir.pdf
https://getmeback.ru/upload/integrations/frontol/plug.pdf
https://getmeback.ru/upload/integrations/iiko/iiko_kassir.pdf
https://getmeback.ru/upload/integrations/iiko/gmb_iiko.pdf
https://getmeback.ru/upload/integrations/iiko/waiter.pdf
https://getmeback.ru/upload/integrations/poster/plug.pdf
https://getmeback.ru/upload/integrations/poster/kassir.pdf

Конечная структура мерчант-панели:
Мастер настройки (загружается при входе в мерчант панель)
Аналитика: Сводный отчет, По времени, Портрет клиента, Повторные продажи, Динамика, RFM-анализ, Активность торговых точек, Активность сотрудников, Реферальная программа, Дни рождения, Автовозврат клиентов.
Программа лояльности: Механики, Акции, Акции с начислением баллов, Push-рассылки, Telegram-рассылки, Промокоды, Мотивация персонала, Защита от мошенничества, Панель кассира (Логин мерчанта, пароль из 9 цифр - общие, таблица пинкодов сотрудников с торговыми точками)
Отзывы: Обратная связь
Клиенты и аудитории: Клиенты, Аудитории
Товары и категории: Товары, Категории
Карта Wallet (раздел-заглушка без ничего)
Настройки: Торговые точки, Сотрудники, Права доступа, Интеграции, Уведомления в телеграм, Системные настройки
Инструменты: Импорт данных

